(this["webpackJsonpsupermetrics-react-task"]=this["webpackJsonpsupermetrics-react-task"]||[]).push([[3],Array(29).concat([function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(30);function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}},function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,"a",(function(){return n}))},function(t,e,r){var n=r(35).Symbol;t.exports=n},function(t,e,r){var n=r(33),o=/[\\^$.*+?()[\]{}|]/g,i=RegExp(o.source);t.exports=function(t){return(t=n(t))&&i.test(t)?t.replace(o,"\\$&"):t}},function(t,e,r){var n=r(34);t.exports=function(t){return null==t?"":n(t)}},function(t,e,r){var n=r(31),o=r(38),i=r(39),c=r(40),u=n?n.prototype:void 0,s=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(c(e))return s?s.call(e):"";var r=e+"";return"0"==r&&1/e==-Infinity?"-0":r}},function(t,e,r){var n=r(36),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();t.exports=i},function(t,e,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,r(37))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}t.exports=r},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}},function(t,e){var r=Array.isArray;t.exports=r},function(t,e,r){var n=r(41),o=r(44);t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==n(t)}},function(t,e,r){var n=r(31),o=r(42),i=r(43),c=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":c&&c in Object(t)?o(t):i(t)}},function(t,e,r){var n=r(31),o=Object.prototype,i=o.hasOwnProperty,c=o.toString,u=n?n.toStringTag:void 0;t.exports=function(t){var e=i.call(t,u),r=t[u];try{t[u]=void 0;var n=!0}catch(s){}var o=c.call(t);return n&&(e?t[u]=r:delete t[u]),o}},function(t,e){var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},,function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return C}));var n=r(29),o=r(12);var i=r(9);function c(t){return function(t){if(Array.isArray(t))return Object(o.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(i.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=r(6),s=r(0),a=r(2),l=r(32),f=r.n(l),d=r(7),p=r(15);function j(t){return null!=t}var b=function(t){return Promise.all(new Array(10).fill(0).map((function(e,r){var n=new URLSearchParams({sl_token:t,page:String(r+1)}).toString(),o="https://api.supermetrics.com/assignment/posts?".concat(n);return fetch(o,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()}))}))).then((function(t){return{posts:t.flatMap((function(t){var e;return null===(e=t.data)||void 0===e?void 0:e.posts})).filter(j),errors:t.map((function(t){return t.error})).filter(j)}}))};function h(t,e,r){if(!e)return t;var n=RegExp(e.split(/\s+/).filter(Boolean).map((function(t){return"(?=.*".concat(f()(t),")")})).join(""),"i");return t.filter((function(t){return n.test(r(t))}))}var O=function(){var t=function(t){var e,r,n=Object(p.a)(t||null,b,{dedupingInterval:33e5});return{posts:((null===n||void 0===n?void 0:n.data)||{}).posts,error:n.error||(null===n||void 0===n||null===(e=n.data)||void 0===e||null===(r=e.errors)||void 0===r?void 0:r.find((function(t){return t})))}}(Object(d.b)().slToken),e=t.posts,r=t.error,n=Object(s.useState)(""),o=Object(u.a)(n,2),i=o[0],l=o[1],f=function(t){return Object(s.useMemo)((function(){var e={},r=[];return null===t||void 0===t||t.forEach((function(t){var n=t.from_id,o=e[n];o||(o={id:n,name:t.from_name,postCount:0,posts:[]},e[n]=o,r.push(o)),o.postCount+=1,o.posts.push(t)})),r.sort((function(t,e){return t.name===e.name?0:t.name>e.name?1:-1}))}),[t])}(e),j=Object(s.useMemo)((function(){return h(f,i,(function(t){return t.name}))}),[f,i]),O=Object(a.g)().authorId,v=Object(s.useState)(!1),x=Object(u.a)(v,2),m=x[0],y=x[1],g=Object(s.useState)(""),w=Object(u.a)(g,2),S=w[0],A=w[1],P=Object(s.useMemo)((function(){var t=f.find((function(t){return t.id===O}));return(null===t||void 0===t?void 0:t.posts.slice().sort((function(t,e){return new Date(e.created_time).getTime()-new Date(t.created_time).getTime()})))||[]}),[O,f]),F=Object(s.useMemo)((function(){return h(m?c(P).reverse():P,S,(function(t){return t.message}))}),[P,S,m]),k=Boolean(O&&P.length),T="string"===typeof(null===r||void 0===r?void 0:r.message)?r.message:void 0;return Object(s.useEffect)((function(){r&&console.error(r)}),[r]),{authorFilter:i,authorPosts:F,filteredAuthors:j,postErrorMessage:T,postFilter:S,setAuthorFilter:l,setPostFilter:A,setSortOrderAsc:y,validAuthor:k}},v=r(4),x=r(5),m=r(8),y=r(1),g=Object(v.a)(x.b)({display:"flex"}),w=v.a.div({padding:"8px",flex:"1 1 auto"}),S=v.a.div({padding:"8px"});function A(t){var e=t.author;return Object(y.jsx)(m.g,{children:Object(y.jsxs)(g,{to:"/authors/".concat(e.id),children:[Object(y.jsx)(w,{children:e.name}),Object(y.jsx)(S,{children:e.postCount})]})})}var P=function(t){var e=t.posts;return Object(y.jsxs)(m.f,{children:[e.map((function(t){return Object(y.jsxs)(m.g,{children:[Object(y.jsx)("div",{children:Object(y.jsx)("time",{dateTime:t.created_time,children:new Date(t.created_time).toLocaleString()})}),Object(y.jsx)("p",{children:t.message})]},t.id)})),!e.length&&Object(y.jsx)(m.g,{children:"No posts match the current filter"})]})},F=v.a.nav({width:"300px",flex:"0 1 auto"}),k=v.a.div({width:"500px",flex:"1 1 auto",padding:"0 16px"}),T=function(t){var e=t.authorFilter,r=t.authorPosts,n=t.filteredAuthors,o=t.postErrorMessage,i=t.postFilter,c=t.setAuthorFilter,u=t.setPostFilter,s=t.setSortOrderAsc,a=t.validAuthor;return Object(y.jsxs)(m.d,{children:[Object(y.jsxs)(F,{children:[Object(y.jsxs)(m.d,{children:[Object(y.jsx)(m.e,{type:"text",placeholder:"Fuzzy author filter...",value:e,onChange:function(t){c(t.currentTarget.value)},style:{flex:"1 1 auto"}}),Object(y.jsx)(m.b,{type:"button",onClick:function(){return c("")},disabled:!e,children:"X"})]}),Object(y.jsxs)(m.f,{children:[n.map((function(t){return Object(y.jsx)(A,{author:t},t.id)})),!n.length&&Object(y.jsx)(m.g,{children:"No authors found"})]})]}),Object(y.jsxs)(k,{children:[Object(y.jsxs)(m.d,{children:[Object(y.jsx)(m.b,{onClick:function(){return s(!1)},title:"Order descending",children:"\u2191"}),Object(y.jsx)(m.b,{onClick:function(){return s(!0)},title:"Order ascending",children:"\u2193"}),Object(y.jsx)("div",{style:{flex:"1 1 auto"}}),Object(y.jsx)(m.e,{type:"text",placeholder:"Fuzzy post filter...",value:i,onChange:function(t){u(t.currentTarget.value)}}),Object(y.jsx)(m.b,{type:"button",onClick:function(){return u("")},disabled:!i,children:"X"})]}),o&&Object(y.jsx)(m.c,{children:o}),a?Object(y.jsx)(P,{posts:r}):Object(y.jsx)(m.a,{as:"p",children:"Select an author to view their posts"})]})]})},C=function(){var t=O();return Object(y.jsx)(T,Object(n.a)({},t))}}])]);
//# sourceMappingURL=3.7d9aae0c.chunk.js.map